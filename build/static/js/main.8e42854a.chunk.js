(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{208:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(38),r=n.n(a),o=n(22),l=n(49),i=Object(l.b)({name:"username",initialState:{username:null},reducers:{setUserName:function(e,t){e.username=t.payload}}}),d=i.actions.setUserName,u=i.reducer,j=Object(l.b)({name:"showContacts",initialState:{showContacts:!1},reducers:{triggerContacts:function(e){e.showContacts=!e.showContacts}}}),b=j.actions.triggerContacts,x=j.reducer,m=Object(l.a)({reducer:{username:u,showContacts:x}}),f=(n(208),n(40)),h=n(8),O=n(23),g=n(414),p=n(3),v=function(e){var t,n,s,a,r=e.location,l=Object(o.d)((function(e){return e.username})),i=Object(o.c)(),u=Object(c.useState)((null===r||void 0===r||null===(t=r.state)||void 0===t?void 0:t.roomName)?null===r||void 0===r||null===(n=r.state)||void 0===n?void 0:n.roomName:""),j=Object(O.a)(u,2),b=j[0],x=j[1],m=Object(c.useState)("bg-black bg-opacity-80"),h=Object(O.a)(m,2),v=h[0],y=h[1],w=Object(c.useState)("text-gray-200"),N=Object(O.a)(w,2),C=N[0],M=N[1],k=Object(c.useState)("bg-gray-200 placeholder-gray-600"),S=Object(O.a)(k,2),Y=S[0],E=S[1];return Object(p.jsxs)("div",{className:"w-full h-screen overflow-hidden ".concat(v),children:[Object(p.jsx)("div",{className:"".concat((null===r||void 0===r||null===(s=r.state)||void 0===s?void 0:s.error)?"block":"hidden"),children:Object(p.jsx)(g.a,{severity:"error",children:null===r||void 0===r||null===(a=r.state)||void 0===a?void 0:a.error})}),Object(p.jsxs)("div",{className:"h-full flex flex-col justify-center items-center transition",children:[Object(p.jsx)("div",{className:"font-thin text-2xl w-5/12 md:w-3/12 lg:w-2/12 text-center py-2 border-b ".concat(C),children:Object(p.jsx)("h1",{children:"Join"})}),Object(p.jsx)("input",{required:!0,className:"w-5/12 md:w-3/12 lg:w-2/12 my-4 shadow rounded py-2 px-3 font-thin ".concat(Y),placeholder:"Enter your name",type:"text",onChange:function(e){return i(d(e.target.value))}}),Object(p.jsx)("input",{required:!0,className:"w-5/12 md:w-3/12 lg:w-2/12 shadow rounded py-2 px-3 font-thin ".concat(Y),placeholder:"Enter room name",value:b,type:"text",onChange:function(e){return x(e.target.value)}}),Object(p.jsx)(f.b,{onClick:function(e){return l&&b?null:e.preventDefault()},to:"/chat?room=".concat(b),className:"my-4",children:Object(p.jsx)("button",{className:"focus:outline-none outline-none border py-2 px-8 rounded-xl text-gray-700 bg-gray-200 hover:bg-black hover:opacity-80 hover:text-gray-300",type:"submit",onMouseEnter:function(){y("bg-green-200 dark:bg-gray-700"),M("text-black text-opacity-80 border-black border-opacity-80"),E("bg-black bg-opacity-80 placeholder-gray-200 text-gray-200")},onMouseLeave:function(){y("bg-black bg-opacity-80"),M("text-gray-200"),E("bg-gray-200 placeholder-gray-600 text-gray-700")},children:"Join chat"})})]})]})},y=n(84),w=n(118),N=n.n(w),C=n(183),M=n.n(C),k=n(83),S=n(185),Y=n(184),E=function(e){var t=e.room,n=Object(o.c)();return Object(p.jsx)("div",{className:"w-full mx-auto mb-2",children:Object(p.jsxs)("div",{className:"w-full flex flex-row justify-between bg-green-400 text-gray-100",children:[Object(p.jsxs)("div",{className:"flex flex-row truncate",children:[Object(p.jsx)("div",{className:"text-4xl p-2",children:Object(p.jsx)(k.a,{})}),Object(p.jsx)("h3",{className:"align-middle my-auto",children:t})]}),Object(p.jsxs)("div",{className:"my-auto px-4 flex flex-row",children:[Object(p.jsx)("button",{className:"mx-4 focus:outline-none",onClick:function(){return n(b())},children:Object(p.jsx)(Y.a,{className:"text-xl"})}),Object(p.jsx)(f.b,{to:"/",className:"text-gray-100 text-xl",children:Object(p.jsx)(S.a,{className:"mx-auto"})})]})]})})},D=n(186),L=function(e){var t=e.message,n=e.setMessage,c=e.sendMessage;return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"flex flex-row w-full relative",children:[Object(p.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?c(e):null},type:"text",placeholder:"Start typing...",className:"w-full p-4 md:p-2 focus:outline-none font-thin pr-20"}),Object(p.jsx)("button",{className:"absolute z-10 right-8 text-2xl text-green-600 p-4 md:p-2 focus:outline-none",children:Object(p.jsx)(D.a,{})}),Object(p.jsx)("button",{onClick:function(e){return c(e)},className:"absolute right-0 z-10 text-2xl text-green-600 p-4 md:p-2 focus:outline-none",children:Object(p.jsx)(k.b,{})})]})})},z=n(199),J=n(10),U=n.n(J),q=function(e){var t=e.message,n=t.user,c=t.text,s=t.date,a=e.name;return n===a.trim().toLowerCase()?Object(p.jsx)("div",{className:"flex justify-end p-2",children:Object(p.jsxs)("div",{className:"min-w-1/3 max-w-3/4 md:max-w-1/2 bg-green-200 bg-opacity-80 rounded-xl py-1 px-2 break-words",children:[Object(p.jsx)("div",{className:"flex flex-row justify-between truncate",children:Object(p.jsx)("p",{className:"font-bold text-sm text-right text-green-600",children:a.trim()})}),Object(p.jsx)("div",{children:Object(p.jsx)("p",{className:"text-sm",children:c})}),Object(p.jsx)("div",{className:"mx-auto text-right",children:Object(p.jsx)("span",{className:"font-thin text-xs",children:U()(U()()).isSame(s,"day")?U()(s).format("LT"):0===U()().diff(s,"days")?"Yesterday":U()().diff(s,"days")<=7?U()(s).format("ddd, h:mm"):0===U()().diff(s,"years")?U()(s).format("MMM Do"):U()(s).format("MMM Do YYYY")})})]})}):"admin"===n?Object(p.jsx)("div",{className:"font-thin text-sm text-center truncate px-16",children:c}):Object(p.jsx)("div",{className:"flex justify-start p-2",children:Object(p.jsxs)("div",{className:"min-w-1/3 max-w-3/4 md:max-w-1/2 bg-green-100 bg-opacity-80 rounded-xl py-1 px-2 break-words",children:[Object(p.jsx)("div",{className:"flex flex-row justify-between truncate",children:Object(p.jsx)("p",{className:"font-bold text-sm text-left text-green-600",children:a.trim()})}),Object(p.jsx)("div",{children:Object(p.jsx)("p",{className:"text-sm",children:c})}),Object(p.jsx)("div",{className:"mx-auto text-right",children:Object(p.jsx)("span",{className:"font-thin text-xs",children:U()(U()()).isSame(s,"day")?U()(s).format("LT"):0===U()().diff(s,"days")?"Yesterday":U()().diff(s,"days")<=7?U()(s).format("ddd, h:mm"):0===U()().diff(s,"years")?U()(s).format("MMM Do"):U()(s).format("MMM Do YYYY")})})]})})},B=(n(394),function(e){var t=e.messages,n=e.name;return Object(p.jsx)(z.a,{followButtonClassName:"ScrollToBottomBtn",className:"w-full h-full overflow-hidden",children:t.map((function(e,t){return Object(p.jsx)("div",{children:Object(p.jsx)(q,{message:e,name:n})},t)}))})});n(395);var H,T=Object(o.b)((function(e,t){return{showContacts:e.showContacts}}))((function(e){var t=e.users,n=e.showContacts;return Object(p.jsx)("div",{className:"bg-white bg-opacity-50 overflow-scroll transition-size duration-500 ".concat(n.showContacts?"w-full md:w-3/12 lg:w-2/12 xl:w-1/12 p-5 h-1/2 md:h-full lg:h-5/6 xl:h-3/4":"w-0 p-0 h-0"),children:Object(p.jsxs)("div",{className:"".concat(n.showContacts?"block":"hidden"),children:[Object(p.jsx)("span",{className:"font-thin",children:"Users in chat:"}),Object(p.jsx)("div",{className:"text-green-800 truncate",children:t.map((function(e){return Object(p.jsx)("div",{children:e.name},e.name)}))})]})})})),I=function(e){var t=e.location,n=Object(o.d)((function(e){return e.username})).username,s=Object(c.useState)(""),a=Object(O.a)(s,2),r=a[0],l=a[1],i=Object(c.useState)(""),d=Object(O.a)(i,2),u=d[0],j=d[1],b=Object(c.useState)([]),x=Object(O.a)(b,2),m=x[0],f=x[1],g=Object(c.useState)([]),v=Object(O.a)(g,2),w=v[0],C=v[1],k=Object(c.useState)(null),S=Object(O.a)(k,2),Y=S[0],D=S[1],z="https://kinda-realtime-chat.herokuapp.com/";Object(c.useEffect)((function(){var e=N.a.parse(t.search).room;return H=M()(z,{transports:["websocket"]}),l(e),H.emit("join",{name:n,room:e},(function(e){D(e)})),H.on("loadMessageHistory",(function(e){var t=e.messagesHistory;f(Object(y.a)(t))})),H.on("getUsersInChat",(function(e){var t=e.usersInChat;C(Object(y.a)(t))})),function(){H.disconnect(),H.off()}}),[z,t.search]),Object(c.useEffect)((function(){H.on("message",(function(e){f([].concat(Object(y.a)(m),[e]))}))}),[m]);return!n||Y?Object(p.jsx)(h.a,{to:{pathname:"/",state:{roomName:N.a.parse(t.search).room,error:Y}}}):Object(p.jsxs)("div",{className:"h-screen bg-green-200 flex flex-col md:flex-row justify-center items-center",children:[Object(p.jsxs)("div",{className:"flex flex-col justify-between h-full lg:h-5/6 xl:h-3/4 w-full lg:w-6/12 bg-gray-200",children:[Object(p.jsx)(E,{room:r}),Object(p.jsx)(B,{messages:m,name:n,className:"h-full"}),Object(p.jsx)(L,{message:u,setMessage:j,sendMessage:function(e){e.preventDefault(),u&&H.emit("sendMessage",u,(function(){return j("")}))}})]}),Object(p.jsx)(T,{users:w})]})},P=function(){function e(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}return Object(c.useEffect)((function(){e(),window.addEventListener("resize",(function(){e()}))}),[]),Object(p.jsx)(f.a,{children:Object(p.jsxs)(h.d,{children:[Object(p.jsx)(h.b,{path:"/",exact:!0,component:v}),Object(p.jsx)(h.b,{path:"/chat",component:I})]})})};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(o.a,{store:m,children:Object(p.jsx)(P,{})})}),document.querySelector("#root"))}},[[396,1,2]]]);